--- a/META-INF/com/google/android/aroma-config
+++ b/META-INF/com/google/android/aroma-config
@@ -44,7 +44,7 @@
 	"\n\n\n\n\n"+
 	"You Are About To Flash\n"+
 	ini_get("rom_name") + " \nBy\n" + ini_get("rom_author") +
-	"\n\n\n"+
+	"\n\n\n***IMPORTANT: You MUST choose the stock kernel for dual boot to work. If you want to use a custom kernel, you can patch and flash it afterwards.***\n\n\n"+
 	"Version: <#080>" + ini_get("rom_version") + "</#>\n"+
 	"Device: <#080>" + ini_get("rom_device") + "</#>\n\n\n"+
 	"Press Next To Continue The Installation...",
--- a/META-INF/com/google/android/updater-script
+++ b/META-INF/com/google/android/updater-script
@@ -1,3 +1,6 @@
+package_extract_file("dualboot.sh", "/tmp/dualboot.sh");
+set_perm(0, 0, 0777, "/tmp/dualboot.sh");
+ui_print("Installing ROM as secondary");
 set_progress(0.00);
 
 ###############################
@@ -6,9 +9,9 @@
 ui_print("@!!!Negalite WondeROM updater-script!!!");
 ui_print(" ");
 
-mount("ext4", "EMMC", "/dev/block/platform/msm_sdcc.1/by-name/cache", "/cache");
-mount("ext4", "EMMC", "/dev/block/platform/msm_sdcc.1/by-name/userdata", "/data");
-mount("ext4", "EMMC", "/dev/block/platform/msm_sdcc.1/by-name/system", "/system");
+run_program("/tmp/dualboot.sh", "mount-cache");
+run_program("/tmp/dualboot.sh", "mount-data");
+run_program("/tmp/dualboot.sh", "mount-system");
 
 package_extract_dir("setup", "/tmp");
 set_perm(0, 0, 0777, "/tmp/backup.sh");
@@ -30,7 +33,7 @@
 ui_print("@Wiping Partitions");
 if file_getprop("/tmp/aroma-data/wipe.prop","selected.0") == "1" then
 	ui_print("@-Erasing Data Partition Excluding Internal SD");
-	run_program("/tmp/wipedata.sh");
+	delete_recursive("/raw-data/dual")
 	delete_recursive("/sd-ext");
 	delete_recursive("/sdcard/Android");
 	delete_recursive("/sdcard/.face");
@@ -616,10 +619,11 @@
 ###############################
 
 ui_print(" ");
+run_program("/tmp/dualboot.sh", "set-multi-kernel");
 ui_print("@Unmounting Partitions");
-unmount("/system");
-unmount("/cache");
-unmount("/data");
+run_program("/tmp/dualboot.sh", "unmount-system");
+run_program("/tmp/dualboot.sh", "unmount-cache");
+run_program("/tmp/dualboot.sh", "unmount-data");
 run_program("/sbin/sleep", "1");
 ui_print("Done");
 set_progress(1.0);
